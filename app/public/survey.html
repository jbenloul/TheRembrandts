<!DOCTYPE html>
<html>

<head>
    <title>Survey</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>

<body>
    <div class="jumbotron container text-center">
        <h1 class="glyphicon glyphicon-list-alt"> 
            Survey
        </h1>
        <hr>
        <h2>
            Here are the completely arbitrary questions that will match you with a totally random person! Are you pumped?!
        </h2>
    </div>
    <div class="container">
        <form class="form-horizontal">
            <div class="form-group">
                <label for="name" class="col-sm-2 control-label">Name (Required) </label>
                <div class="col-sm-10">
                    <input type="name" class="form-control" id="name" placeholder="Enter your Name here">
                </div>
            </div>
            <div class="form-group">
                <label for="picture" class="col-sm-2 control-label">Image (Required) </label>
                <div class="col-sm-10">
                    <input for="picture" class="form-control" id="picture" placeholder="Link to Image">
                </div>
            </div>
            <hr>
            <div id="questionsDiv">
                <h3>Question 1: You enjoy watching movies. </h3>
                <div class="radio" id="q1">
                    <label class="radio-inline">
                        <input type="radio" name="optradio1" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio1" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio1" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio1" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio1" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 2: You prefer reading books to watching movies. </h3>
                <div class="radio" id="q2">
                    <label class="radio-inline">
                        <input type="radio" name="optradio2" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio2" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio2" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio2" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio2" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 3: Video games are life. </h3>
                <div class="radio" id="q3">
                    <label class="radio-inline">
                        <input type="radio" name="optradio3" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio3" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio3" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio3" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio3" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 4: Im more of a music person</h3>
                <div class="radio" id="q4">
                    <label class="radio-inline">
                        <input type="radio" name="optradio4" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio4" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio4" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio4" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio4" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 5: Bring on the VR. </h3>
                <div class="radio" id="q5">
                    <label class="radio-inline">
                        <input type="radio" name="optradio5" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio5" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio5" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio5" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio5" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 6: My diet consists of just about anything. </h3>
                <div class="radio" id="q6">
                    <label class="radio-inline">
                        <input type="radio" name="optradio6" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio6" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio6" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio6" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio6" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 7: I work out regularly. </h3>
                <div class="radio" id="q7">
                    <label class="radio-inline">
                        <input type="radio" name="optradio7" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio7" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio7" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio7" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio7" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 8: Avocado Toast is a way of life </h3>
                <div class="radio" id="q8">
                    <label class="radio-inline">
                        <input type="radio" name="optradio8" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio8" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio8" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio8" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio8" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 9: I prefer spending most of my time outdoors in nature. </h3>
                <div class="radio" id="q9">
                    <label class="radio-inline">
                        <input type="radio" name="optradio9" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio9" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio9" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio9" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio9" value="5">5 (Strongly Agree)</label>
                </div>
                <h3>Question 10: I have a hermit crab lifestyle. </h3>
                <div class="radio" id="q10">
                    <label class="radio-inline">
                        <input type="radio" name="optradio10" value="1">1 (Strongly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio10" value="2">2 (Mildly Disagree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio10" value="3">3 (Meh)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio10" value="4">4 (Mildly Agree)</label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio10" value="5">5 (Strongly Agree)</label>
                </div>
                <br>
            </div>
            <div class="text-right">
                <a href="api/friends">
                    <button type="submit" class="btn btn-primary btn-md" id="add-btn"><span class="glyphicon glyphicon-user"></span> Submit!</button>
                </a>
            </div>
            <!-- the matching appears -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header noselect">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title text-center noselect" id="myModalLabel">We recommend you start hanging out with:</h4>
                        </div>
                        <div class="modal-body text-center noselect" id="recommendedBody">
                        <div> <h2 class="nameShow"> </h2> </div>
                        <div> <img class="picShow" style="width: 250px; height: 250px"></div>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger btn-simple" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

       <footer class="footer">
          <div class="container">
                <p><a href="/api/friend">API Friends List</a></p>
          </div>
        </footer>
    </div>
    </form>
    <script>
    //  var questionsArray = [
    // "Question 1: ",
    // "Question 2: ",
    // "Question 3: ",
    // "Question 4: ",
    // "Question 5: ",
    // "Question 6: ",
    // "Question 7: ",
    // "Question 8: ",
    // "Question 9: ",
    // "Question 10: ",
    // ]


    //    for (var i = 0; i < questionsArray.length; i++) {
    //        var questionsText = `
    //  <h3>${questionsArray[i]}: </h3> 
    // <div class="radio" id="q${i+1}">
    //  <label class="radio-inline">
    //          <input type="radio" name="optradio${i+1}" value="1">1 (Strongly Disagree</label>
    //     <label class="radio-inline">
    //         <input type="radio" name="optradio${i+1}" value="1">2 (Mildly Disagree)</label>
    //     <label class="radio-inline">
    //         <input type="radio" name="optradio${i+1}" value="1">3 (Meh)</label>
    //     <label class="radio-inline">
    //         <input type="radio" name="optradio${i+1}" value="1">4 (Mildly Agree)</label>
    //     <label class="radio-inline">
    //         <input type="radio" name="optradio${i+1}" value="1">5 (Strongly Agree)</label>
    //    </div>`

    //        $("#questionsDiv").html(questionsText);
    //    }

    $("#add-btn").on('click', function(event) {
        event.preventDefault();
        var newFriend = {
            name: $("#name").val().trim(),
            picture: $("#picture").val().trim(),
            scores: [
                parseInt($('input[name=optradio1]:checked', '#q1').attr("value")),
                parseInt($('input[name=optradio2]:checked', '#q2').attr("value")),
                parseInt($('input[name=optradio3]:checked', '#q3').attr("value")),
                parseInt($('input[name=optradio4]:checked', '#q4').attr("value")),
                parseInt($('input[name=optradio5]:checked', '#q5').attr("value")),
                parseInt($('input[name=optradio6]:checked', '#q6').attr("value")),
                parseInt($('input[name=optradio7]:checked', '#q7').attr("value")),
                parseInt($('input[name=optradio8]:checked', '#q8').attr("value")),
                parseInt($('input[name=optradio9]:checked', '#q9').attr("value")),
                parseInt($('input[name=optradio10]:checked', '#q10').attr("value"))
            ]
        }

        var addTotal = function() {
            var scoreTot = 0;
            for (var i = 0; i < newFriend.scores.length; i++) {
                scoreTot += newFriend.scores[i];
                console.log(scoreTot)
            }
            return scoreTot
        }
var currentURL = window.location.origin;

        $.post(currentURL + "/api/friend", newFriend)
            .done(function(data) {
                newFriend.scoreTotal = addTotal();
                alert("Adding 'friend'...");
                //Show the modal      
                $('#myModal').modal('show');
                $(".nameShow").text(data.name);
                $(".picShow").attr('src', data.picture);
            });

    });

    </script>
</body>

</html>
